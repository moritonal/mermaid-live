{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/typescript/workerManager.js","node_modules/monaco-editor/esm/vs/language/typescript/lib/lib.index.js","node_modules/monaco-editor/esm/vs/language/typescript/languageFeatures.js","node_modules/monaco-editor/esm/vs/language/typescript/tsMode.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","WorkerManager","modeId","defaults","_this","_modeId","_defaults","_worker","_client","_configChangeListener","onDidChange","_stopWorker","_updateExtraLibsToken","_extraLibsChangeListener","onDidExtraLibsChange","_updateExtraLibs","prototype","dispose","myToken","proxy","_a","getProxy","updateExtraLibs","getExtraLibs","_getClient","editor","createWebWorker","moduleId","keepIdleModels","createData","compilerOptions","getCompilerOptions","extraLibs","customWorkerPath","workerOptions","p","getEagerModelSync","worker","withSyncedResources","getModels","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","client","libFileSet","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","String","__","constructor","create","IndentStyle","flattenDiagnosticMessageText","diag","newLine","indent","undefined","i","messageText","kid","displayPartsToString","displayParts","displayPart","text","join","Adapter","_textSpanToRange","span","p1","getPositionAt","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","LibFiles","_libFiles","_hasFetchedLibFiles","_fetchLibFilesPromise","isLibFile","path","indexOf","slice","getOrCreateModel","getModel","createModel","_containsLibFile","uris","uris_1","fetchLibFilesIfNecessary","_fetchLibFiles","w","getLibFiles","libFiles","DiagnosticCategory","DiagnosticsAdapter","_super","_selector","_disposables","_listener","onModelAdd","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","toString","onModelRemoved","setModelMarkers","key","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","recomputeDiagostics","forEach","promises","noSyntaxValidation","noSemanticValidation","noSuggestionDiagnostics","allDiagnostics","diagnostics","relatedUris","_b","isDisposed","getDiagnosticsOptions","getSyntacticDiagnostics","getSemanticDiagnostics","getSuggestionDiagnostics","all","reduce","c","concat","diagnosticCodesToIgnore","code","relatedInformation","file","Uri","parse","fileName","_convertDiagnostics","diagStart","diagLength","tags","reportsUnnecessary","MarkerTag","Unnecessary","reportsDeprecated","Deprecated","severity","_tsDiagnosticCategoryToMarkerSeverity","category","message","_convertRelatedInformation","info","relatedResource","relatedResourceUri","infoStart","infoLength","resource","Error","MarkerSeverity","Message","Info","Warning","Suggestion","Hint","SuggestAdapter","defineProperty","get","enumerable","configurable","provideCompletionItems","position","_context","token","wordInfo","wordRange","offset","suggestions","getWordUntilPosition","Range","getOffsetAt","getCompletionsAtPosition","entries","entry","range","replacementSpan","kindModifiers","languages","CompletionItemTag","name","insertText","sortText","kind","convertKind","resolveCompletionItem","item","myItem","details","getCompletionEntryDetails","detail","documentation","createDocumentationString","Kind","primitiveType","keyword","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","documentationString","tag","tagToString","tagLabel","split","paramName","rest","SignatureHelpAdapter","signatureHelpTriggerCharacters","_toSignatureHelpTriggerReason","context","triggerKind","SignatureHelpTriggerKind","TriggerCharacter","triggerCharacter","isRetrigger","ContentChange","Invoke","provideSignatureHelp","ret","getSignatureHelpItems","triggerReason","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","contents","getQuickInfoAtPosition","textSpan","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","entries_1","refModel","getDefinitionAtPosition","ReferenceAdapter","provideReferences","entries_2","getReferencesAtPosition","OutlineAdapter","provideDocumentSymbols","convert","getNavigationBarItems","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","startOffset","endOffset","edits","getFormattingEditsForRange","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","CodeActionAdaptor","provideCodeActions","end","formatOptions","errorCodes","codeFixes","actions","getOptions","markers","m","Number","getCodeFixesAtPosition","fix","changes","isNewFile","_tsCodeFixActionToMonacoCodeAction","codeFix","_c","textChanges","textChange","action","title","description","RenameAdapter","provideRenameEdits","newName","renameInfo","renameLocations","renameLocations_1","renameLocation","resource_1","model_1","getRenameInfo","allowRenameOfImportPath","canRename","rejectReason","localizedErrorMessage","fileToRename","findRenameLocations","javaScriptWorker","typeScriptWorker","setupTypeScript","setupMode","setupJavaScript","getJavaScriptWorker","getTypeScriptWorker","languageFeatures","registerCompletionItemProvider","registerSignatureHelpProvider","registerHoverProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","registerCodeActionProvider","registerRenameProvider"],"mappings":"AEAA,ACAA,AHAA;AECA,ACAA,AHAA;AECA,ACAA,AHAA;AECA,ACAA,AHAA;AECA,ACAA,AHAA;;;ACJA;AACA;AACA;AACA;AACA,ADqCA;AEeA,ADnDA;AACA,ADDA,IAAIA,SAAS,GAAI,UAAQ,SAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AEoDzF,ACpDA,AHCI,WAASC,KAAT,CAAeC,KAAf,EAAsB;ACC1B,ADD4B,WAAOA,KAAK,YAAYH,CAAjB,GAAqBG,KAArB,GAA6B,IAAIH,CAAJ,CAAM,UAAUI,OAAV,EAAmB;AEDzF,ADGO,AEFP,AHA2FA,IEDvFoF,ADGOD,EDFgFnF,OED9E,AFCqF,CCE7E,ADF8ED,EEDlF,CDGO,EAAjB,ADF2F,CAAP,MEDlE,SAAKqF,SAAd,IAA6B,YAAY;AACrD,AFAwG,KAA5C,CEAxDC,AFAoB,aEAP,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,ADERF,AEFA,AHDgH,IECxGE,MDEE,CAAC,MCFU,GAAGG,CDEd,CAAV,GAAyB,CCFK,CAACC,EDE/B,YCFwB,IACX;AAAEC,ADEfP,MCFeO,IDEL,CAAC,ICFa,EAAE,QDEhB,CAAV,GAA6B,IAA7B;ACFa,ADGbP,ADJI,SAAO,CCID,CAAC,GDJKvF,CAAC,EECyB+F,GFDpB/F,CAAC,CECV,EFDaK,EECyB,KFDlC,CAAN,ECID,ADJ0B,CCIpC,CCH6DqF,CAAV,CDGb,CCH0BC,CAAb,EAAgB,ADGnE,EDJ8CvF,OAAV,EAAmBE,MAAnB,EAA2B;AECMoF,ADIrEH,ADJQ,MEA6DG,CAAC,CAACI,EDI7D,CAAC,EDJMvF,IEAoD,GAAcoF,CAAd,CFA7D,CAAmBxF,KAAnB,EAA0B,SCIxB,CAAV,GAA2C,IAA3C;ACJuF,ADKvFoF,ADLoC,KEDZ,IAEZ,CDIF,ADL8B,CCK7B,QCJWG,CAAV,EAAaC,CAAb,EAAgB,QDIlB,CAAV,GAAqC,IAArC;ACJ8B,ADK9BJ,ADN0C/E,QAAAA,ECMhC,CCLyB,ADKxB,CDNmC,CAACP,EECRuE,CAAT,IAAcmB,CAAd,CFD0B,CECT,AFDUlF,IECNmF,AFDJ,CCMrC,ADNoDzF,CCM9D,GAAgC,CCLyB,AFDV,CECWkD,AFDZ,CAAJ,CCM1C,OCLmD,CAAiB2C,cAAjB,CAAgC9D,IAAhC,CAAqCyD,CAArC,EAAwCnB,CAAxC,CAAJ,EAAgDkB,CAAC,CAAClB,CAAD,CAAD,GAAOmB,CAAC,CAACnB,CAAD,CAAR;AAAc,ADM7Ge,AEPA,AHAwE,IGApEgW,CDDI,EFC4B,CAAqC,ECO/D,CAAC,IDPqE7a,CAAP,EAAU,EGAnF,kBFOU,CAAV,GAA0C,IAA1C;AACA6E,AEPA,AHDqFjF,IGCjFkb,IHDiFlb,ECQ3E,CAAC,GDRgF,CAACI,CAAD,CAAN,GGCrF,iBFOU,CAAV,GAAyC,IAAzC;ACNQ,ADOR6E,ADTiG,UCSvF,CCPKE,ADOJ,aCPiB,CAACC,CAAD,EAAIC,CAAJ,CAApB,MDOE,CAAV,GAAwC,IAAxC;ACNK,ADOLJ,AERO,AHF4F,GEF/F,MCIYkW,CFQN,CAAC,aERJ,CAAyBjZ,QAAzB,CFQG,CAAV,AER0C,GFQJ,IAAtC;AACA+C,AERIiW,EAAAA,QFQM,CAAC,OERS,GAAGE,SAAS,CAAClZ,KFQvB,CAAV,EERgC,CFQQ,CERG,GFQ3C,SERgC,CAA5B;ADCA,ADQJ+C,AERC,AHHO,SEGG,CDQD,CAAC,EDXM5E,MEGI+E,CAAV,CFHH,CEGgBC,AFHExF,CEGf,EAAgB,EFHnB,EAAyB,MCWvB,CAAV,GAAuC,IAAvC;ACPQ,ADQRoF,ADZmC,QEIvB,EDQF,ADZ6B,CCY5B,ICRQI,CAAP,KAAa,UAAb,IAA2BA,CAAC,KAAK,IAArC,ADQE,CAAV,CCPY,EDOqC,ICP/B,ADOlB,ICPsB1D,SAAJ,CAAc,yBAAyBgE,MAAM,CAACN,CAAD,CAA/B,GAAqC,+BAAnD,CAAN;AACJF,ADORF,AETO,AHJkC/E,IEMjCiF,IFNiCjF,CGIzBmb,CFSN,CAAC,CDbkC,CAAC1b,IEMzB,CAACyF,CAAD,EAAIC,CAAJ,AFNkC,CEM/C,AFNgD,CGIjD,CAAyBnD,KHJuB,CAAT,CAAmBrC,CGI1D,EAAmC,EHJI,CAAD,CAAJ,GCa/B,CAAV,GAA8C,IAA9C;AACAoF,AETIgW,AHLuE,EGKvEA,KHL+B,CAAyC,ECclE,CAAC,IDdwE7a,CAAP,EGKxD,AHLkE,GGK/Dgb,OFSb,CAAV,CETgC,CAAClZ,CFSD,IAAhC,GETgC,EAAW,YAAX,CAA5B;ADEI,ADQR+C,AETC,AHNuFjF,QAAAA,ECe9E,CAAC,ECRM4F,CFP6E,CEOtF,AFPuFxF,CAAD,CAAN,CEOlE,eDQZ,CAAV,GAAqC,IAArC;ACRwB,ADSxB6E,ADhBoG,UCgB1F,CCTmBY,ADSlB,WCTa,GAAmBT,CAAnB,EDSd,CAAV,GAAgC,IAAhC;ACT+C,ADU/CH,AEVO,AHP+F,SGOtFqW,CFUN,CAAC,iBEVJ,GAA+B,EFU5B,CAAV,GAAqC,IAArC;AACArW,AEVI,SAAO,CFUD,CAAC,EEVIlF,OAAJ,CAAY,UAAUD,EFUvB,CAAV,GAAqC,CEVd,EAAmBE,CFU1C,KEVuB,EAA2B;ADA1CoF,ADWRH,AEVQ,AHRA,IEOAG,CAAC,CAACrC,ECCE,CAACkY,CFUH,CAAC,EDlBM/a,EEOT,EFPA,CEOcmF,AFPA/E,CEOC,KAAK,AFPpB,CGQA,CHRsB,CGQC,CDDT,GAAagF,IDWzB,CAAV,CCXyC,CAACQ,CDWH,IAAvC,CCXmC,CAAcT,CAAd,CAAb,IAAiCO,EAAE,CAAC7C,SAAH,GAAesC,CAAC,CAACtC,SAAjB,EAA4B,IAAI6C,EAAJ,EAA7D,CAAd;AACH,ADWLX,AEVY,AHToB3E,GEE5B,GFF4BA,ICmBtB,CAAC,CDnB2B,CGSnBN,AHToBO,IAAP,EGSP,CAAC,AHToBT,OAAO,CAACQ,MAAM,CAACT,KAAR,CCmB3C,ADnBsB,CCmBhC,EDnBsED,CCmBzB,GEVpB,CFUzB,AEVY,AHT+D,CAACU,MAAM,CAACT,KAAR,CAAL,CAAoBW,IAApB,CAAyBP,SAAzB,EAAoCI,QAApC,CAAtC;AES/B,ADWD4E,AEVS,AHV6G,CEL1E,EAA5C,ODyBU,CAAC,wBAAD,CAAV,GAAuC,IAAvC;AACAA,UAAU,CAAC,6BAAD,CAAV,GAA4C,IAA5C;ACXA,ADYAA,AEXQnF,AHVAI,IESJX,ACCIO,AHVAI,IAAI,CAAC,CCqBH,ADrBIP,CCqBH,AEXI,CAACsb,CDDH,GAAI,GFTM,GAAGtb,IESD,ECCV,CAAP,EHV2B,CAACc,GESNlB,EFTJ,CAAgBC,KCqBhC,CCZM,ADYhB,CDrB0B,ECqBqB,ADrBIC,CESP,GDY5C,MDrB6D,CESPD,GFTW,EAAvC,CAAb,CES+B,CFT0BW,CESPV,GFTlD,EAAD,CAAJ,IESoC,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AACrF,ADYJsF,AEXK,AHVA,GGKM,AHVA,CGUP,AHVA,MC0BM,CCZGrF,ADYF,KCZP,CAAeC,KAAf,EAAsB,kBDYhB,CAAV,GAA8C,IAA9C;ACZ4B,ADa5BoF,AEXC,AHVA,CARD,SC6BU,CCbyBpF,ADaxB,KCb6B,YAAYH,ADa1C,CCbyB,ADanC,GCbwDG,ADaxB,IAAhC,CCbmC,GAA6B,IAAIH,CAAJ,CAAM,UAAUI,OAAV,EAAmB;AAAEA,ADc3FmF,MCd2FnF,IDcjF,CAAC,ECduF,CAACD,KAAD,CAAP,aDcjF,CAAV,GAAqC,IAArC;ACd4G,ADe5GoF,AEZO,AHVP,IAAIvE,CEO4D,CAApC,GCGZ6a,CFYN,CAAC,IDtBI,GAAI,UGUZ,AHVoB,GGUW,EFY5B,CAAV,GAAqC,ADtBL7a,ICsBhC,ODtBkB,IAA8B,UAAUlB,OAAV,EAAmBmB,IAAnB,EAAyB;AEOuC,ADgBhHsE,AEZI,AHVA,MAAIrE,CAAC,EGUE,CFYD,ADtBE,CCsBD,EEZIb,OAAJ,CAAY,UAAUD,KFYvB,CAAV,CEZuB,EFYiB,AEZEE,IFY1C,EEZuB,EAA2B;AFalDiF,AEZQ,AHXMpE,IAAAA,IGWF,CAACqa,AHXM,CCuBT,CAAC,ADvBU,CAAT,aGWJ,EAAuB,QFYrB,CAAV,GAAuC,IAAvC;AChBI,ADiBJjW,AEZY,AHZYnE,IAAAA,IAAI,CEOjB,CDiBD,ADxBoB,CCwBnB,EEZQd,CDLHN,CAAC,ICKQ,CDLHA,ACKI,CDLH,CFPkB,EEOfK,OAAT,CAAN,EAAyB,ADiB1B,CAAV,GAAsC,IAAtC,ECjB8CD,ICKrB,CAAb,EDLwB,EAAmBE,MAAnB,EAA2B;AACvD,ADiBRiF,AEZS,AHbkC,UCyBjC,ADzBqClE,CCyBpC,ADzBqC,CAAC,CEQhCd,AFR+B,CAAD,GAAO,CAAX,EAAc,EEQjD,CAAmBJ,GFRoCkB,CAAC,CEQxD,ADiBE,ADzBuD,CCyBjE,ADzBgE,CEQ9B,AFRuB,ECyBzB,IAAhC;ACjBoC,ADkBpCkE,AD1BqE,UEQ7B,ADkB9B,CAAC,ED1BiElE,CAAC,CAAC,CAAD,CAAR,gBC0B3D,CAAV,GAAqC,IAArC;AClB0Cb,ADmB1C+E,AEbQnF,AHd2E,IGc3EA,CHdI,GEQ8BI,EDmBhC,CAAC,AEbI,CDN+B,ACM9Bgb,CDN+Bvb,SAAS,CAACQ,IAAV,CAAeN,ACM/C,CAAP,IDNuC,CAAD,CAAJ,ADmBhC,CAAV,GAAuC,IAAvC;ACnBwE,ADoBxEoF,AEbK,AHfgFjE,GGU1E,CAAP,AHViFA,GEQjD,CAAqC,AFRgB,EC4B/E,AD5BiF,CC4BhF,CD5BC,GEQoEZ,CAAP,EAAU,iBDoBzE,CAAV,GAAuC,IAAvC;ACpBqFJ,ADqBrFiF,AEbC,AHhB8FhE,IAAAA,GAAG,CEQbjB,CFRe,CC6B1F,CAAC,GCrBgF,CAACI,CAAD,CAAN,kBDqB3E,CAAV,GAAuC,IAAvC;ACrBiG,ADsBjG6E,AD9BY,GAAR,OC8BM,CAAC,wBAAD,CAAV,GAAuC,IAAvC;ACtBmG,ADuBnGA,AEdA,AHjBI,MAAsG/D,CAAtG,EGiBKka,CFcC,CAAC,OEdX,CAAmBlZ,QAAnB,CFcU,CAAV,AEd6BD,GFcG,GEdhC,CFcA,CEdqC;AFerCgD,AEdI,AHlBA,MGkBID,AHlBqG7D,CAAzG,GCgCM,CAAC,CEdG,GAAG,IAAIa,cFcX,CAAV,GAAqC,IAArC,MEdiB,CAAkBC,MAAlB,EAA0BC,QAA1B,CAAb;ADTI,ADwBR+C,ADjCI,MAA4GlE,CAA5G,GCiCM,CAAC,ECxBMV,QAAT,CAAkBR,KAAlB,EAAyB,IDwBvB,CAAV,GAAqC,IAArC;ACxBmC,ADyBnCoF,AEfI,AHnBA,MGmBIb,AHnB2GhD,CAA/G,GESmC,ADyB7B,CAAC,CEfG,GAAG,YAAY,SFenB,CAAV,GAAwC,IAAxC;ACzByClB,AD0BzC+E,AEfQ,AHnBJ,QEQqC/E,ACW7BoI,CHnBDlH,CCkCD,ADlCE,CCkCD,CC1BkC,ACW7B,CDX8BzB,AFR/B,EGmBI,EAAX,KDX+C,CAAC,OAAD,CAAT,CAAmBE,KAAnB,CAAD,CAAJ,ED0B/B,CAAV,GAA6C,IAA7C;AC1B2E,AD2B3EoF,ADnCiB9E,IAAAA,GEQkB,CAAyC,AFRvD,ECmCX,ADnCakB,CCmCZ,GDnCgB,CEQwDjB,AFRvD,CEQgD,AFRjD,CAAZ,CEQuE,iBD2B5E,CAAV,GAAuC,IAAvC;AC3BwFJ,AD4BxFiF,AEhBQ,AHpBwB,QEQwDjF,CCY3E,CFgBH,CAAC,EEhBM8E,AHpBwBzD,CEQqD,CAACjB,ACY5E,CDZ2E,CAAN,AFR3C,CGoBvB,AHpBwB,CGoBtC,AHpBqC,CAA9B,CGoBU0E,EAAE,GAAGC,SAAS,CAACjD,MAAhC,EAAwCgD,CFgBtC,CAAV,AEhBkD,EAA1C,CFgByC,CEhBK,GFgBtD;AC5BoG,AD6BpGG,AEhBYqD,AHrBsC,MGqBtCA,IFgBF,AEhBM,CFgBL,AEhBMxD,EAAD,CAAJ,AHrBgDzD,GGqBrC0D,CHrByC,CAAC,CAAD,KCqCtD,CAAV,AEhBgC,CAACD,EFgBJ,AEhBG,CAApB,GFgBZ;AC7BsG,AD8BtGG,AEhBS,AHtBM,GAAJ,EAA4D,KCsC7D,CAAC,CDtCmE3D,MAAP,KAAkB,ECsC/E,CAAV,GAA6B,IAA7B,ADtCuE,KAAiCF,CAAC,CAACE,MAAM,CAACC,QAAR,CAAD,GAAqB,YAAW;ACuCxI0D,ADvC0I,UCuChI,CAAC,ADvCsI,IAAP,aCuChI,CAAV,GAAgC,IAAhC;AC9BQ,AD+BRA,AEjBQ,AHvBgJ,GAAjF,CAA5D,EAAgJ7D,CAAvJ,GCwCM,CAAC,AEjBI4D,EDdE9E,IAAT,ACca,CDdCI,ACcAsE,MDdd,EAAsB,OD+BpB,CAAV,GAAqC,IAArC,CEjBe,CAAgCnE,KAAhC,CAAsCuE,MAAtC,EAA8CsD,IAA9C,CAAP;ADdwBhI,ADgChC2E,AEjBK,GAND,GDT4B3E,IDgCtB,CAAC,CChC2B,CAACC,IAAP,GAAcT,OAAO,CAACQ,KDgC5C,CChCkD,ADgC5D,CChC6DT,EDgCxB,GChCgB,CAArB,ADgChC,GChCsED,K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","file":"tsMode.36fe6354.js","sourceRoot":"..","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { editor } from './fillers/monaco-editor-core.js';\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(modeId, defaults) {\r\n        var _this = this;\r\n        this._modeId = modeId;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._client = null;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n        this._updateExtraLibsToken = 0;\r\n        this._extraLibsChangeListener = this._defaults.onDidExtraLibsChange(function () {\r\n            return _this._updateExtraLibs();\r\n        });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        this._configChangeListener.dispose();\r\n        this._extraLibsChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._updateExtraLibs = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myToken, proxy;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._worker) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        myToken = ++this._updateExtraLibsToken;\r\n                        return [4 /*yield*/, this._worker.getProxy()];\r\n                    case 1:\r\n                        proxy = _a.sent();\r\n                        if (this._updateExtraLibsToken !== myToken) {\r\n                            // avoid multiple calls\r\n                            return [2 /*return*/];\r\n                        }\r\n                        proxy.updateExtraLibs(this._defaults.getExtraLibs());\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        var _this = this;\r\n        if (!this._client) {\r\n            this._worker = editor.createWebWorker({\r\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\r\n                moduleId: 'vs/language/typescript/tsWorker',\r\n                label: this._modeId,\r\n                keepIdleModels: true,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    compilerOptions: this._defaults.getCompilerOptions(),\r\n                    extraLibs: this._defaults.getExtraLibs(),\r\n                    customWorkerPath: this._defaults.workerOptions.customWorkerPath\r\n                }\r\n            });\r\n            var p = this._worker.getProxy();\r\n            if (this._defaults.getEagerModelSync()) {\r\n                p = p.then(function (worker) {\r\n                    if (_this._worker) {\r\n                        return _this._worker.withSyncedResources(editor\r\n                            .getModels()\r\n                            .filter(function (model) { return model.getModeId() === _this._modeId; })\r\n                            .map(function (model) { return model.uri; }));\r\n                    }\r\n                    return worker;\r\n                });\r\n            }\r\n            this._client = p;\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient()\r\n            .then(function (client) {\r\n            _client = client;\r\n        })\r\n            .then(function (_) {\r\n            if (_this._worker) {\r\n                return _this._worker.withSyncedResources(resources);\r\n            }\r\n        })\r\n            .then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n//\r\n// **NOTE**: Do not edit directly! This file is generated using `npm run import-typescript`\r\n//\r\n/** Contains all the lib files */\r\nexport var libFileSet = {};\r\nlibFileSet['lib.d.ts'] = true;\r\nlibFileSet['lib.dom.d.ts'] = true;\r\nlibFileSet['lib.dom.iterable.d.ts'] = true;\r\nlibFileSet['lib.es2015.collection.d.ts'] = true;\r\nlibFileSet['lib.es2015.core.d.ts'] = true;\r\nlibFileSet['lib.es2015.d.ts'] = true;\r\nlibFileSet['lib.es2015.generator.d.ts'] = true;\r\nlibFileSet['lib.es2015.iterable.d.ts'] = true;\r\nlibFileSet['lib.es2015.promise.d.ts'] = true;\r\nlibFileSet['lib.es2015.proxy.d.ts'] = true;\r\nlibFileSet['lib.es2015.reflect.d.ts'] = true;\r\nlibFileSet['lib.es2015.symbol.d.ts'] = true;\r\nlibFileSet['lib.es2015.symbol.wellknown.d.ts'] = true;\r\nlibFileSet['lib.es2016.array.include.d.ts'] = true;\r\nlibFileSet['lib.es2016.d.ts'] = true;\r\nlibFileSet['lib.es2016.full.d.ts'] = true;\r\nlibFileSet['lib.es2017.d.ts'] = true;\r\nlibFileSet['lib.es2017.full.d.ts'] = true;\r\nlibFileSet['lib.es2017.intl.d.ts'] = true;\r\nlibFileSet['lib.es2017.object.d.ts'] = true;\r\nlibFileSet['lib.es2017.sharedmemory.d.ts'] = true;\r\nlibFileSet['lib.es2017.string.d.ts'] = true;\r\nlibFileSet['lib.es2017.typedarrays.d.ts'] = true;\r\nlibFileSet['lib.es2018.asyncgenerator.d.ts'] = true;\r\nlibFileSet['lib.es2018.asynciterable.d.ts'] = true;\r\nlibFileSet['lib.es2018.d.ts'] = true;\r\nlibFileSet['lib.es2018.full.d.ts'] = true;\r\nlibFileSet['lib.es2018.intl.d.ts'] = true;\r\nlibFileSet['lib.es2018.promise.d.ts'] = true;\r\nlibFileSet['lib.es2018.regexp.d.ts'] = true;\r\nlibFileSet['lib.es2019.array.d.ts'] = true;\r\nlibFileSet['lib.es2019.d.ts'] = true;\r\nlibFileSet['lib.es2019.full.d.ts'] = true;\r\nlibFileSet['lib.es2019.object.d.ts'] = true;\r\nlibFileSet['lib.es2019.string.d.ts'] = true;\r\nlibFileSet['lib.es2019.symbol.d.ts'] = true;\r\nlibFileSet['lib.es2020.bigint.d.ts'] = true;\r\nlibFileSet['lib.es2020.d.ts'] = true;\r\nlibFileSet['lib.es2020.full.d.ts'] = true;\r\nlibFileSet['lib.es2020.intl.d.ts'] = true;\r\nlibFileSet['lib.es2020.promise.d.ts'] = true;\r\nlibFileSet['lib.es2020.sharedmemory.d.ts'] = true;\r\nlibFileSet['lib.es2020.string.d.ts'] = true;\r\nlibFileSet['lib.es2020.symbol.wellknown.d.ts'] = true;\r\nlibFileSet['lib.es5.d.ts'] = true;\r\nlibFileSet['lib.es6.d.ts'] = true;\r\nlibFileSet['lib.esnext.d.ts'] = true;\r\nlibFileSet['lib.esnext.full.d.ts'] = true;\r\nlibFileSet['lib.esnext.intl.d.ts'] = true;\r\nlibFileSet['lib.esnext.promise.d.ts'] = true;\r\nlibFileSet['lib.esnext.string.d.ts'] = true;\r\nlibFileSet['lib.esnext.weakref.d.ts'] = true;\r\nlibFileSet['lib.scripthost.d.ts'] = true;\r\nlibFileSet['lib.webworker.d.ts'] = true;\r\nlibFileSet['lib.webworker.importscripts.d.ts'] = true;\r\nlibFileSet['lib.webworker.iterable.d.ts'] = true;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { libFileSet } from './lib/lib.index.js';\r\nimport { editor, languages, Uri, Range, MarkerTag, MarkerSeverity } from './fillers/monaco-editor-core.js';\r\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\r\nvar IndentStyle;\r\n(function (IndentStyle) {\r\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\r\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\r\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\r\n})(IndentStyle || (IndentStyle = {}));\r\nexport function flattenDiagnosticMessageText(diag, newLine, indent) {\r\n    if (indent === void 0) { indent = 0; }\r\n    if (typeof diag === 'string') {\r\n        return diag;\r\n    }\r\n    else if (diag === undefined) {\r\n        return '';\r\n    }\r\n    var result = '';\r\n    if (indent) {\r\n        result += newLine;\r\n        for (var i = 0; i < indent; i++) {\r\n            result += '  ';\r\n        }\r\n    }\r\n    result += diag.messageText;\r\n    indent++;\r\n    if (diag.next) {\r\n        for (var _i = 0, _a = diag.next; _i < _a.length; _i++) {\r\n            var kid = _a[_i];\r\n            result += flattenDiagnosticMessageText(kid, newLine, indent);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction displayPartsToString(displayParts) {\r\n    if (displayParts) {\r\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join('');\r\n    }\r\n    return '';\r\n}\r\n//#endregion\r\nvar Adapter = /** @class */ (function () {\r\n    function Adapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    // protected _positionToOffset(model: editor.ITextModel, position: monaco.IPosition): number {\r\n    // \treturn model.getOffsetAt(position);\r\n    // }\r\n    // protected _offsetToPosition(model: editor.ITextModel, offset: number): monaco.IPosition {\r\n    // \treturn model.getPositionAt(offset);\r\n    // }\r\n    Adapter.prototype._textSpanToRange = function (model, span) {\r\n        var p1 = model.getPositionAt(span.start);\r\n        var p2 = model.getPositionAt(span.start + span.length);\r\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\r\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\r\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\r\n    };\r\n    return Adapter;\r\n}());\r\nexport { Adapter };\r\n// --- lib files\r\nvar LibFiles = /** @class */ (function () {\r\n    function LibFiles(_worker) {\r\n        this._worker = _worker;\r\n        this._libFiles = {};\r\n        this._hasFetchedLibFiles = false;\r\n        this._fetchLibFilesPromise = null;\r\n    }\r\n    LibFiles.prototype.isLibFile = function (uri) {\r\n        if (!uri) {\r\n            return false;\r\n        }\r\n        if (uri.path.indexOf('/lib.') === 0) {\r\n            return !!libFileSet[uri.path.slice(1)];\r\n        }\r\n        return false;\r\n    };\r\n    LibFiles.prototype.getOrCreateModel = function (uri) {\r\n        var model = editor.getModel(uri);\r\n        if (model) {\r\n            return model;\r\n        }\r\n        if (this.isLibFile(uri) && this._hasFetchedLibFiles) {\r\n            return editor.createModel(this._libFiles[uri.path.slice(1)], 'typescript', uri);\r\n        }\r\n        return null;\r\n    };\r\n    LibFiles.prototype._containsLibFile = function (uris) {\r\n        for (var _i = 0, uris_1 = uris; _i < uris_1.length; _i++) {\r\n            var uri = uris_1[_i];\r\n            if (this.isLibFile(uri)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    LibFiles.prototype.fetchLibFilesIfNecessary = function (uris) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._containsLibFile(uris)) {\r\n                            // no lib files necessary\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, this._fetchLibFiles()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LibFiles.prototype._fetchLibFiles = function () {\r\n        var _this = this;\r\n        if (!this._fetchLibFilesPromise) {\r\n            this._fetchLibFilesPromise = this._worker()\r\n                .then(function (w) { return w.getLibFiles(); })\r\n                .then(function (libFiles) {\r\n                _this._hasFetchedLibFiles = true;\r\n                _this._libFiles = libFiles;\r\n            });\r\n        }\r\n        return this._fetchLibFilesPromise;\r\n    };\r\n    return LibFiles;\r\n}());\r\nexport { LibFiles };\r\n// --- diagnostics --- ---\r\nvar DiagnosticCategory;\r\n(function (DiagnosticCategory) {\r\n    DiagnosticCategory[DiagnosticCategory[\"Warning\"] = 0] = \"Warning\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Error\"] = 1] = \"Error\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Suggestion\"] = 2] = \"Suggestion\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Message\"] = 3] = \"Message\";\r\n})(DiagnosticCategory || (DiagnosticCategory = {}));\r\nvar DiagnosticsAdapter = /** @class */ (function (_super) {\r\n    __extends(DiagnosticsAdapter, _super);\r\n    function DiagnosticsAdapter(_libFiles, _defaults, _selector, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._libFiles = _libFiles;\r\n        _this._defaults = _defaults;\r\n        _this._selector = _selector;\r\n        _this._disposables = [];\r\n        _this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            if (model.getModeId() !== _selector) {\r\n                return;\r\n            }\r\n            var handle;\r\n            var changeSubscription = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model); }, 500);\r\n            });\r\n            _this._listener[model.uri.toString()] = {\r\n                dispose: function () {\r\n                    changeSubscription.dispose();\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n            _this._doValidate(model);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            editor.setModelMarkers(model, _this._selector, []);\r\n            var key = model.uri.toString();\r\n            if (_this._listener[key]) {\r\n                _this._listener[key].dispose();\r\n                delete _this._listener[key];\r\n            }\r\n        };\r\n        _this._disposables.push(editor.onDidCreateModel(onModelAdd));\r\n        _this._disposables.push(editor.onWillDisposeModel(onModelRemoved));\r\n        _this._disposables.push(editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        _this._disposables.push({\r\n            dispose: function () {\r\n                for (var _i = 0, _a = editor.getModels(); _i < _a.length; _i++) {\r\n                    var model = _a[_i];\r\n                    onModelRemoved(model);\r\n                }\r\n            }\r\n        });\r\n        var recomputeDiagostics = function () {\r\n            // redo diagnostics when options change\r\n            for (var _i = 0, _a = editor.getModels(); _i < _a.length; _i++) {\r\n                var model = _a[_i];\r\n                onModelRemoved(model);\r\n                onModelAdd(model);\r\n            }\r\n        };\r\n        _this._disposables.push(_this._defaults.onDidChange(recomputeDiagostics));\r\n        _this._disposables.push(_this._defaults.onDidExtraLibsChange(recomputeDiagostics));\r\n        editor.getModels().forEach(onModelAdd);\r\n        return _this;\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (model) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var worker, promises, _a, noSyntaxValidation, noSemanticValidation, noSuggestionDiagnostics, allDiagnostics, diagnostics, relatedUris;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this._worker(model.uri)];\r\n                    case 1:\r\n                        worker = _b.sent();\r\n                        if (model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        promises = [];\r\n                        _a = this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation, noSuggestionDiagnostics = _a.noSuggestionDiagnostics;\r\n                        if (!noSyntaxValidation) {\r\n                            promises.push(worker.getSyntacticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSemanticValidation) {\r\n                            promises.push(worker.getSemanticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSuggestionDiagnostics) {\r\n                            promises.push(worker.getSuggestionDiagnostics(model.uri.toString()));\r\n                        }\r\n                        return [4 /*yield*/, Promise.all(promises)];\r\n                    case 2:\r\n                        allDiagnostics = _b.sent();\r\n                        if (!allDiagnostics || model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        diagnostics = allDiagnostics\r\n                            .reduce(function (p, c) { return c.concat(p); }, [])\r\n                            .filter(function (d) {\r\n                            return (_this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore || []).indexOf(d.code) ===\r\n                                -1;\r\n                        });\r\n                        relatedUris = diagnostics\r\n                            .map(function (d) { return d.relatedInformation || []; })\r\n                            .reduce(function (p, c) { return c.concat(p); }, [])\r\n                            .map(function (relatedInformation) {\r\n                            return relatedInformation.file ? Uri.parse(relatedInformation.file.fileName) : null;\r\n                        });\r\n                        return [4 /*yield*/, this._libFiles.fetchLibFilesIfNecessary(relatedUris)];\r\n                    case 3:\r\n                        _b.sent();\r\n                        if (model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        editor.setModelMarkers(model, this._selector, diagnostics.map(function (d) { return _this._convertDiagnostics(model, d); }));\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DiagnosticsAdapter.prototype._convertDiagnostics = function (model, diag) {\r\n        var diagStart = diag.start || 0;\r\n        var diagLength = diag.length || 1;\r\n        var _a = model.getPositionAt(diagStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n        var _b = model.getPositionAt(diagStart + diagLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n        var tags = [];\r\n        if (diag.reportsUnnecessary) {\r\n            tags.push(MarkerTag.Unnecessary);\r\n        }\r\n        if (diag.reportsDeprecated) {\r\n            tags.push(MarkerTag.Deprecated);\r\n        }\r\n        return {\r\n            severity: this._tsDiagnosticCategoryToMarkerSeverity(diag.category),\r\n            startLineNumber: startLineNumber,\r\n            startColumn: startColumn,\r\n            endLineNumber: endLineNumber,\r\n            endColumn: endColumn,\r\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n'),\r\n            code: diag.code.toString(),\r\n            tags: tags,\r\n            relatedInformation: this._convertRelatedInformation(model, diag.relatedInformation)\r\n        };\r\n    };\r\n    DiagnosticsAdapter.prototype._convertRelatedInformation = function (model, relatedInformation) {\r\n        var _this = this;\r\n        if (!relatedInformation) {\r\n            return;\r\n        }\r\n        var result = [];\r\n        relatedInformation.forEach(function (info) {\r\n            var relatedResource = model;\r\n            if (info.file) {\r\n                var relatedResourceUri = Uri.parse(info.file.fileName);\r\n                relatedResource = _this._libFiles.getOrCreateModel(relatedResourceUri);\r\n            }\r\n            if (!relatedResource) {\r\n                return;\r\n            }\r\n            var infoStart = info.start || 0;\r\n            var infoLength = info.length || 1;\r\n            var _a = relatedResource.getPositionAt(infoStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n            var _b = relatedResource.getPositionAt(infoStart + infoLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n            result.push({\r\n                resource: relatedResource.uri,\r\n                startLineNumber: startLineNumber,\r\n                startColumn: startColumn,\r\n                endLineNumber: endLineNumber,\r\n                endColumn: endColumn,\r\n                message: flattenDiagnosticMessageText(info.messageText, '\\n')\r\n            });\r\n        });\r\n        return result;\r\n    };\r\n    DiagnosticsAdapter.prototype._tsDiagnosticCategoryToMarkerSeverity = function (category) {\r\n        switch (category) {\r\n            case DiagnosticCategory.Error:\r\n                return MarkerSeverity.Error;\r\n            case DiagnosticCategory.Message:\r\n                return MarkerSeverity.Info;\r\n            case DiagnosticCategory.Warning:\r\n                return MarkerSeverity.Warning;\r\n            case DiagnosticCategory.Suggestion:\r\n                return MarkerSeverity.Hint;\r\n        }\r\n        return MarkerSeverity.Info;\r\n    };\r\n    return DiagnosticsAdapter;\r\n}(Adapter));\r\nexport { DiagnosticsAdapter };\r\nvar SuggestAdapter = /** @class */ (function (_super) {\r\n    __extends(SuggestAdapter, _super);\r\n    function SuggestAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.'];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var wordInfo, wordRange, resource, offset, worker, info, suggestions;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        wordInfo = model.getWordUntilPosition(position);\r\n                        wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getCompletionsAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        suggestions = info.entries.map(function (entry) {\r\n                            var _a;\r\n                            var range = wordRange;\r\n                            if (entry.replacementSpan) {\r\n                                var p1 = model.getPositionAt(entry.replacementSpan.start);\r\n                                var p2 = model.getPositionAt(entry.replacementSpan.start + entry.replacementSpan.length);\r\n                                range = new Range(p1.lineNumber, p1.column, p2.lineNumber, p2.column);\r\n                            }\r\n                            var tags = [];\r\n                            if (((_a = entry.kindModifiers) === null || _a === void 0 ? void 0 : _a.indexOf('deprecated')) !== -1) {\r\n                                tags.push(languages.CompletionItemTag.Deprecated);\r\n                            }\r\n                            return {\r\n                                uri: resource,\r\n                                position: position,\r\n                                offset: offset,\r\n                                range: range,\r\n                                label: entry.name,\r\n                                insertText: entry.name,\r\n                                sortText: entry.sortText,\r\n                                kind: SuggestAdapter.convertKind(entry.kind),\r\n                                tags: tags\r\n                            };\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                suggestions: suggestions\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.prototype.resolveCompletionItem = function (item, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myItem, resource, position, offset, worker, details;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        myItem = item;\r\n                        resource = myItem.uri;\r\n                        position = myItem.position;\r\n                        offset = myItem.offset;\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCompletionEntryDetails(resource.toString(), offset, myItem.label)];\r\n                    case 2:\r\n                        details = _a.sent();\r\n                        if (!details) {\r\n                            return [2 /*return*/, myItem];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                uri: resource,\r\n                                position: position,\r\n                                label: details.name,\r\n                                kind: SuggestAdapter.convertKind(details.kind),\r\n                                detail: displayPartsToString(details.displayParts),\r\n                                documentation: {\r\n                                    value: SuggestAdapter.createDocumentationString(details)\r\n                                }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.convertKind = function (kind) {\r\n        switch (kind) {\r\n            case Kind.primitiveType:\r\n            case Kind.keyword:\r\n                return languages.CompletionItemKind.Keyword;\r\n            case Kind.variable:\r\n            case Kind.localVariable:\r\n                return languages.CompletionItemKind.Variable;\r\n            case Kind.memberVariable:\r\n            case Kind.memberGetAccessor:\r\n            case Kind.memberSetAccessor:\r\n                return languages.CompletionItemKind.Field;\r\n            case Kind.function:\r\n            case Kind.memberFunction:\r\n            case Kind.constructSignature:\r\n            case Kind.callSignature:\r\n            case Kind.indexSignature:\r\n                return languages.CompletionItemKind.Function;\r\n            case Kind.enum:\r\n                return languages.CompletionItemKind.Enum;\r\n            case Kind.module:\r\n                return languages.CompletionItemKind.Module;\r\n            case Kind.class:\r\n                return languages.CompletionItemKind.Class;\r\n            case Kind.interface:\r\n                return languages.CompletionItemKind.Interface;\r\n            case Kind.warning:\r\n                return languages.CompletionItemKind.File;\r\n        }\r\n        return languages.CompletionItemKind.Property;\r\n    };\r\n    SuggestAdapter.createDocumentationString = function (details) {\r\n        var documentationString = displayPartsToString(details.documentation);\r\n        if (details.tags) {\r\n            for (var _i = 0, _a = details.tags; _i < _a.length; _i++) {\r\n                var tag = _a[_i];\r\n                documentationString += \"\\n\\n\" + tagToString(tag);\r\n            }\r\n        }\r\n        return documentationString;\r\n    };\r\n    return SuggestAdapter;\r\n}(Adapter));\r\nexport { SuggestAdapter };\r\nfunction tagToString(tag) {\r\n    var tagLabel = \"*@\" + tag.name + \"*\";\r\n    if (tag.name === 'param' && tag.text) {\r\n        var _a = tag.text.split(' '), paramName = _a[0], rest = _a.slice(1);\r\n        tagLabel += \"`\" + paramName + \"`\";\r\n        if (rest.length > 0)\r\n            tagLabel += \" \\u2014 \" + rest.join(' ');\r\n    }\r\n    else if (tag.text) {\r\n        tagLabel += \" \\u2014 \" + tag.text;\r\n    }\r\n    return tagLabel;\r\n}\r\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\r\n    __extends(SignatureHelpAdapter, _super);\r\n    function SignatureHelpAdapter() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.signatureHelpTriggerCharacters = ['(', ','];\r\n        return _this;\r\n    }\r\n    SignatureHelpAdapter._toSignatureHelpTriggerReason = function (context) {\r\n        switch (context.triggerKind) {\r\n            case languages.SignatureHelpTriggerKind.TriggerCharacter:\r\n                if (context.triggerCharacter) {\r\n                    if (context.isRetrigger) {\r\n                        return { kind: 'retrigger', triggerCharacter: context.triggerCharacter };\r\n                    }\r\n                    else {\r\n                        return { kind: 'characterTyped', triggerCharacter: context.triggerCharacter };\r\n                    }\r\n                }\r\n                else {\r\n                    return { kind: 'invoked' };\r\n                }\r\n            case languages.SignatureHelpTriggerKind.ContentChange:\r\n                return context.isRetrigger ? { kind: 'retrigger' } : { kind: 'invoked' };\r\n            case languages.SignatureHelpTriggerKind.Invoke:\r\n            default:\r\n                return { kind: 'invoked' };\r\n        }\r\n    };\r\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token, context) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, ret;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getSignatureHelpItems(resource.toString(), offset, {\r\n                                triggerReason: SignatureHelpAdapter._toSignatureHelpTriggerReason(context)\r\n                            })];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ret = {\r\n                            activeSignature: info.selectedItemIndex,\r\n                            activeParameter: info.argumentIndex,\r\n                            signatures: []\r\n                        };\r\n                        info.items.forEach(function (item) {\r\n                            var signature = {\r\n                                label: '',\r\n                                parameters: []\r\n                            };\r\n                            signature.documentation = {\r\n                                value: displayPartsToString(item.documentation)\r\n                            };\r\n                            signature.label += displayPartsToString(item.prefixDisplayParts);\r\n                            item.parameters.forEach(function (p, i, a) {\r\n                                var label = displayPartsToString(p.displayParts);\r\n                                var parameter = {\r\n                                    label: label,\r\n                                    documentation: {\r\n                                        value: displayPartsToString(p.documentation)\r\n                                    }\r\n                                };\r\n                                signature.label += label;\r\n                                signature.parameters.push(parameter);\r\n                                if (i < a.length - 1) {\r\n                                    signature.label += displayPartsToString(item.separatorDisplayParts);\r\n                                }\r\n                            });\r\n                            signature.label += displayPartsToString(item.suffixDisplayParts);\r\n                            ret.signatures.push(signature);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                value: ret,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SignatureHelpAdapter;\r\n}(Adapter));\r\nexport { SignatureHelpAdapter };\r\n// --- hover ------\r\nvar QuickInfoAdapter = /** @class */ (function (_super) {\r\n    __extends(QuickInfoAdapter, _super);\r\n    function QuickInfoAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, documentation, tags, contents;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getQuickInfoAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        documentation = displayPartsToString(info.documentation);\r\n                        tags = info.tags ? info.tags.map(function (tag) { return tagToString(tag); }).join('  \\n\\n') : '';\r\n                        contents = displayPartsToString(info.displayParts);\r\n                        return [2 /*return*/, {\r\n                                range: this._textSpanToRange(model, info.textSpan),\r\n                                contents: [\r\n                                    {\r\n                                        value: '```typescript\\n' + contents + '\\n```\\n'\r\n                                    },\r\n                                    {\r\n                                        value: documentation + (tags ? '\\n\\n' + tags : '')\r\n                                    }\r\n                                ]\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return QuickInfoAdapter;\r\n}(Adapter));\r\nexport { QuickInfoAdapter };\r\n// --- occurrences ------\r\nvar OccurrencesAdapter = /** @class */ (function (_super) {\r\n    __extends(OccurrencesAdapter, _super);\r\n    function OccurrencesAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getOccurrencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, entries.map(function (entry) {\r\n                                return {\r\n                                    range: _this._textSpanToRange(model, entry.textSpan),\r\n                                    kind: entry.isWriteAccess\r\n                                        ? languages.DocumentHighlightKind.Write\r\n                                        : languages.DocumentHighlightKind.Text\r\n                                };\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OccurrencesAdapter;\r\n}(Adapter));\r\nexport { OccurrencesAdapter };\r\n// --- definition ------\r\nvar DefinitionAdapter = /** @class */ (function (_super) {\r\n    __extends(DefinitionAdapter, _super);\r\n    function DefinitionAdapter(_libFiles, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._libFiles = _libFiles;\r\n        return _this;\r\n    }\r\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_1, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getDefinitionAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        // Fetch lib files if necessary\r\n                        return [4 /*yield*/, this._libFiles.fetchLibFilesIfNecessary(entries.map(function (entry) { return Uri.parse(entry.fileName); }))];\r\n                    case 3:\r\n                        // Fetch lib files if necessary\r\n                        _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                            entry = entries_1[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = this._libFiles.getOrCreateModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return DefinitionAdapter;\r\n}(Adapter));\r\nexport { DefinitionAdapter };\r\n// --- references ------\r\nvar ReferenceAdapter = /** @class */ (function (_super) {\r\n    __extends(ReferenceAdapter, _super);\r\n    function ReferenceAdapter(_libFiles, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._libFiles = _libFiles;\r\n        return _this;\r\n    }\r\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_2, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getReferencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        // Fetch lib files if necessary\r\n                        return [4 /*yield*/, this._libFiles.fetchLibFilesIfNecessary(entries.map(function (entry) { return Uri.parse(entry.fileName); }))];\r\n                    case 3:\r\n                        // Fetch lib files if necessary\r\n                        _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\r\n                            entry = entries_2[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = this._libFiles.getOrCreateModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ReferenceAdapter;\r\n}(Adapter));\r\nexport { ReferenceAdapter };\r\n// --- outline ------\r\nvar OutlineAdapter = /** @class */ (function (_super) {\r\n    __extends(OutlineAdapter, _super);\r\n    function OutlineAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, worker, items, convert, result;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getNavigationBarItems(resource.toString())];\r\n                    case 2:\r\n                        items = _a.sent();\r\n                        if (!items || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        convert = function (bucket, item, containerLabel) {\r\n                            var result = {\r\n                                name: item.text,\r\n                                detail: '',\r\n                                kind: (outlineTypeTable[item.kind] || languages.SymbolKind.Variable),\r\n                                range: _this._textSpanToRange(model, item.spans[0]),\r\n                                selectionRange: _this._textSpanToRange(model, item.spans[0]),\r\n                                tags: [],\r\n                                containerName: containerLabel\r\n                            };\r\n                            if (item.childItems && item.childItems.length > 0) {\r\n                                for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\r\n                                    var child = _a[_i];\r\n                                    convert(bucket, child, result.name);\r\n                                }\r\n                            }\r\n                            bucket.push(result);\r\n                        };\r\n                        result = [];\r\n                        items.forEach(function (item) { return convert(result, item); });\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OutlineAdapter;\r\n}(Adapter));\r\nexport { OutlineAdapter };\r\nvar Kind = /** @class */ (function () {\r\n    function Kind() {\r\n    }\r\n    Kind.unknown = '';\r\n    Kind.keyword = 'keyword';\r\n    Kind.script = 'script';\r\n    Kind.module = 'module';\r\n    Kind.class = 'class';\r\n    Kind.interface = 'interface';\r\n    Kind.type = 'type';\r\n    Kind.enum = 'enum';\r\n    Kind.variable = 'var';\r\n    Kind.localVariable = 'local var';\r\n    Kind.function = 'function';\r\n    Kind.localFunction = 'local function';\r\n    Kind.memberFunction = 'method';\r\n    Kind.memberGetAccessor = 'getter';\r\n    Kind.memberSetAccessor = 'setter';\r\n    Kind.memberVariable = 'property';\r\n    Kind.constructorImplementation = 'constructor';\r\n    Kind.callSignature = 'call';\r\n    Kind.indexSignature = 'index';\r\n    Kind.constructSignature = 'construct';\r\n    Kind.parameter = 'parameter';\r\n    Kind.typeParameter = 'type parameter';\r\n    Kind.primitiveType = 'primitive type';\r\n    Kind.label = 'label';\r\n    Kind.alias = 'alias';\r\n    Kind.const = 'const';\r\n    Kind.let = 'let';\r\n    Kind.warning = 'warning';\r\n    return Kind;\r\n}());\r\nexport { Kind };\r\nvar outlineTypeTable = Object.create(null);\r\noutlineTypeTable[Kind.module] = languages.SymbolKind.Module;\r\noutlineTypeTable[Kind.class] = languages.SymbolKind.Class;\r\noutlineTypeTable[Kind.enum] = languages.SymbolKind.Enum;\r\noutlineTypeTable[Kind.interface] = languages.SymbolKind.Interface;\r\noutlineTypeTable[Kind.memberFunction] = languages.SymbolKind.Method;\r\noutlineTypeTable[Kind.memberVariable] = languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberGetAccessor] = languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberSetAccessor] = languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.variable] = languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.const] = languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.localVariable] = languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.variable] = languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.function] = languages.SymbolKind.Function;\r\noutlineTypeTable[Kind.localFunction] = languages.SymbolKind.Function;\r\n// --- formatting ----\r\nvar FormatHelper = /** @class */ (function (_super) {\r\n    __extends(FormatHelper, _super);\r\n    function FormatHelper() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatHelper._convertOptions = function (options) {\r\n        return {\r\n            ConvertTabsToSpaces: options.insertSpaces,\r\n            TabSize: options.tabSize,\r\n            IndentSize: options.tabSize,\r\n            IndentStyle: IndentStyle.Smart,\r\n            NewLineCharacter: '\\n',\r\n            InsertSpaceAfterCommaDelimiter: true,\r\n            InsertSpaceAfterSemicolonInForStatements: true,\r\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\r\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\r\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\r\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\r\n            PlaceOpenBraceOnNewLineForFunctions: false\r\n        };\r\n    };\r\n    FormatHelper.prototype._convertTextChanges = function (model, change) {\r\n        return {\r\n            text: change.newText,\r\n            range: this._textSpanToRange(model, change.span)\r\n        };\r\n    };\r\n    return FormatHelper;\r\n}(Adapter));\r\nexport { FormatHelper };\r\nvar FormatAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatAdapter, _super);\r\n    function FormatAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, startOffset, endOffset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        startOffset = model.getOffsetAt({\r\n                            lineNumber: range.startLineNumber,\r\n                            column: range.startColumn\r\n                        });\r\n                        endOffset = model.getOffsetAt({\r\n                            lineNumber: range.endLineNumber,\r\n                            column: range.endColumn\r\n                        });\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getFormattingEditsForRange(resource.toString(), startOffset, endOffset, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatAdapter;\r\n}(FormatHelper));\r\nexport { FormatAdapter };\r\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatOnTypeAdapter, _super);\r\n    function FormatOnTypeAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\r\n        get: function () {\r\n            return [';', '}', '\\n'];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getFormattingEditsAfterKeystroke(resource.toString(), offset, ch, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatOnTypeAdapter;\r\n}(FormatHelper));\r\nexport { FormatOnTypeAdapter };\r\n// --- code actions ------\r\nvar CodeActionAdaptor = /** @class */ (function (_super) {\r\n    __extends(CodeActionAdaptor, _super);\r\n    function CodeActionAdaptor() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CodeActionAdaptor.prototype.provideCodeActions = function (model, range, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, start, end, formatOptions, errorCodes, worker, codeFixes, actions;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        start = model.getOffsetAt({\r\n                            lineNumber: range.startLineNumber,\r\n                            column: range.startColumn\r\n                        });\r\n                        end = model.getOffsetAt({\r\n                            lineNumber: range.endLineNumber,\r\n                            column: range.endColumn\r\n                        });\r\n                        formatOptions = FormatHelper._convertOptions(model.getOptions());\r\n                        errorCodes = context.markers\r\n                            .filter(function (m) { return m.code; })\r\n                            .map(function (m) { return m.code; })\r\n                            .map(Number);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getCodeFixesAtPosition(resource.toString(), start, end, errorCodes, formatOptions)];\r\n                    case 2:\r\n                        codeFixes = _a.sent();\r\n                        if (!codeFixes || model.isDisposed()) {\r\n                            return [2 /*return*/, { actions: [], dispose: function () { } }];\r\n                        }\r\n                        actions = codeFixes\r\n                            .filter(function (fix) {\r\n                            // Removes any 'make a new file'-type code fix\r\n                            return fix.changes.filter(function (change) { return change.isNewFile; }).length === 0;\r\n                        })\r\n                            .map(function (fix) {\r\n                            return _this._tsCodeFixActionToMonacoCodeAction(model, context, fix);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                actions: actions,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CodeActionAdaptor.prototype._tsCodeFixActionToMonacoCodeAction = function (model, context, codeFix) {\r\n        var edits = [];\r\n        for (var _i = 0, _a = codeFix.changes; _i < _a.length; _i++) {\r\n            var change = _a[_i];\r\n            for (var _b = 0, _c = change.textChanges; _b < _c.length; _b++) {\r\n                var textChange = _c[_b];\r\n                edits.push({\r\n                    resource: model.uri,\r\n                    edit: {\r\n                        range: this._textSpanToRange(model, textChange.span),\r\n                        text: textChange.newText\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        var action = {\r\n            title: codeFix.description,\r\n            edit: { edits: edits },\r\n            diagnostics: context.markers,\r\n            kind: 'quickfix'\r\n        };\r\n        return action;\r\n    };\r\n    return CodeActionAdaptor;\r\n}(FormatHelper));\r\nexport { CodeActionAdaptor };\r\n// --- rename ----\r\nvar RenameAdapter = /** @class */ (function (_super) {\r\n    __extends(RenameAdapter, _super);\r\n    function RenameAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, fileName, offset, worker, renameInfo, renameLocations, edits, _i, renameLocations_1, renameLocation, resource_1, model_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        fileName = resource.toString();\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        if (model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, worker.getRenameInfo(fileName, offset, {\r\n                                allowRenameOfImportPath: false\r\n                            })];\r\n                    case 2:\r\n                        renameInfo = _a.sent();\r\n                        if (renameInfo.canRename === false) {\r\n                            // use explicit comparison so that the discriminated union gets resolved properly\r\n                            return [2 /*return*/, {\r\n                                    edits: [],\r\n                                    rejectReason: renameInfo.localizedErrorMessage\r\n                                }];\r\n                        }\r\n                        if (renameInfo.fileToRename !== undefined) {\r\n                            throw new Error('Renaming files is not supported.');\r\n                        }\r\n                        return [4 /*yield*/, worker.findRenameLocations(fileName, offset, \r\n                            /*strings*/ false, \r\n                            /*comments*/ false, \r\n                            /*prefixAndSuffix*/ false)];\r\n                    case 3:\r\n                        renameLocations = _a.sent();\r\n                        if (!renameLocations || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        edits = [];\r\n                        for (_i = 0, renameLocations_1 = renameLocations; _i < renameLocations_1.length; _i++) {\r\n                            renameLocation = renameLocations_1[_i];\r\n                            resource_1 = Uri.parse(renameLocation.fileName);\r\n                            model_1 = editor.getModel(resource_1);\r\n                            if (model_1) {\r\n                                edits.push({\r\n                                    resource: resource_1,\r\n                                    edit: {\r\n                                        range: this._textSpanToRange(model_1, renameLocation.textSpan),\r\n                                        text: newName\r\n                                    }\r\n                                });\r\n                            }\r\n                            else {\r\n                                throw new Error(\"Unknown URI \" + resource_1 + \".\");\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, { edits: edits }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RenameAdapter;\r\n}(Adapter));\r\nexport { RenameAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nimport { languages } from './fillers/monaco-editor-core.js';\r\nvar javaScriptWorker;\r\nvar typeScriptWorker;\r\nexport function setupTypeScript(defaults) {\r\n    typeScriptWorker = setupMode(defaults, 'typescript');\r\n}\r\nexport function setupJavaScript(defaults) {\r\n    javaScriptWorker = setupMode(defaults, 'javascript');\r\n}\r\nexport function getJavaScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!javaScriptWorker) {\r\n            return reject('JavaScript not registered!');\r\n        }\r\n        resolve(javaScriptWorker);\r\n    });\r\n}\r\nexport function getTypeScriptWorker() {\r\n    return new Promise(function (resolve, reject) {\r\n        if (!typeScriptWorker) {\r\n            return reject('TypeScript not registered!');\r\n        }\r\n        resolve(typeScriptWorker);\r\n    });\r\n}\r\nfunction setupMode(defaults, modeId) {\r\n    var client = new WorkerManager(modeId, defaults);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    var libFiles = new languageFeatures.LibFiles(worker);\r\n    languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\r\n    languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\r\n    languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\r\n    languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\r\n    languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(libFiles, worker));\r\n    languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(libFiles, worker));\r\n    languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\r\n    languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\r\n    languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\r\n    languages.registerCodeActionProvider(modeId, new languageFeatures.CodeActionAdaptor(worker));\r\n    languages.registerRenameProvider(modeId, new languageFeatures.RenameAdapter(worker));\r\n    new languageFeatures.DiagnosticsAdapter(libFiles, defaults, modeId, worker);\r\n    return worker;\r\n}\r\n"]}